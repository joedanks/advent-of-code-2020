import functools


def get_input():
    return [
        '.....#............#....#####.##',
        '.#.#....#......#....##.........',
        '......#.#.#.....###.#.#........',
        '......#...#.....#####....#..##.',
        '...#............##...###.##....',
        '#.....#...#....#......##....##.',
        '#...#.#....#..#..##.##...#.....',
        '.......#..........#..#..#.#....',
        '.#.....#.#.......#..#...#....#.',
        '#..#.##.#..................###.',
        '...#.#.##...##.###.....#..#...#',
        '..#.#...#............#.......#.',
        '#..#.#..#.#....#...#.#.....#..#',
        '#......##....#..#.#.#........#.',
        '....#..#.#.#.##............#..#',
        '....#..#..#...#.#.##......#...#',
        '##...#...........#.....###.#...',
        '..#...#.#...#.#.....#....##.##.',
        '....##...##.#....#.....#.##....',
        '#........##......#......#.#.#.#',
        '....#.#.#.........##......#....',
        '.#......#...#.....##..#....#..#',
        '....#..#.#.....#..........#..#.',
        '..##...#..##................#.#',
        '.....#....#.#..#......#........',
        '........#..#.#......#.#........',
        '.....#.#....##.###....#...#....',
        '...##.#.......#....###..#......',
        '............##.#..#...#........',
        '#..###..#.....#.####...........',
        '.......##.....#......#......#..',
        '#........##..#.....##.......#.#',
        '#.##...#...#...#......##..#.#.#',
        '......#....##.#.#...#...##....#',
        '#..#....##.#......#.......##...',
        '.#..........#..........#....#.#',
        '#.....##......##....#..........',
        '..#.#.....#.#...#........#.....',
        '...#........#..#..#.##..##.....',
        '......###.....#..#...#.###...##',
        '.##.##.......#.......###...#...',
        '#.#..#.#.#....#.....###..#...##',
        '......#.##..........#.......##.',
        '#..#.#.........#.....##...##...',
        '..#...#....#....###.#......#...',
        '.....#..#.######.....#..#.#....',
        '..#.#.....#.....##.#....##.#.##',
        '...#.#.#....#....##..#..#.#.##.',
        '...........#.#...#..#..####....',
        '.........#####.#.#.#...#.##.#..',
        '.......#...#......#.##.#.##....',
        '....#.....#.....###..........#.',
        '.#.###....##.#..#..........#...',
        '#...#.........##.....####....#.',
        '##....##...#..........#........',
        '...#.#.#.#....#..........#.....',
        '.......#....#......##.......#..',
        '.#.#..#.........#.#.##....#....',
        '..#.............#..##.#.##..###',
        '.#.##..............#..#..##..#.',
        '..##.#..#......#...##..#.##...#',
        '......#..#....#....#....##..#..',
        '...#...##.............#..###...',
        '...##....#.#.##........#.....##',
        '....#.#.......#..###..#....####',
        '#...#...##..#.####..#...##....#',
        '.......#..#.##..#...#.#........',
        '###.#......#..##..#......#.##..',
        '#....#............#.....#......',
        '..##...#..##......#..#....#....',
        '.#..##...#....#.#...#...#..#..#',
        '........#....###...#..##..###.#',
        '.........#....#....#..#.#.#...#',
        '.#....###.##...#.#...........##',
        '..#..#.#..#.#.##..#...##.......',
        '##..#.#.#....#...#..#..........',
        '#..#.......#....#..##...####...',
        '............#.#..........##.##.',
        '#...#..#.#....#..#.#....##.....',
        '......#...#...#.##............#',
        '#.....##..###..#.#..#.#.##..#.#',
        '#..#.#..#......#.......##.#....',
        '##..#.#..#...#......#.##...###.',
        '.#....#..............#....#.#..',
        '..#.#..##....#....#..##........',
        '.#.#...#..#.....#.#..##........',
        '.....#..#.#......#....#.#..#.#.',
        '....#.###...###.#.#.....#......',
        '...........#.#....##....##.....',
        '..#..#.##..........#...#...#..#',
        '.....#.###.#..........#........',
        '....#....##........###...#.....',
        '.#.....##.......#....#..##..###',
        '#.....#...............##......#',
        '#..#.#..#.#.#.....#.#...#......',
        '.##.###...#....#..........##...',
        '.#.......#.....................',
        '.#.#....#...##..#...#...##.....',
        '.#.#...#.......#.......#...#...',
        '....#.#..#.#..#...#....##......',
        '....##.....#.##....#.##..##..##',
        '..#............#...###.##..#...',
        '.#..#.........#.##....#....#..#',
        '.#..##..#..#........#.#.##.#.##',
        '.###.#...#...............#...#.',
        '...#.##.##.#......#...#....##.#',
        '#......##.......##...###....#.#',
        '#..##.....##......#.#.##....#.#',
        '...#.#....#.#.#...........##..#',
        '#.....##......##.#..........##.',
        '###....#.#...#.#..####.........',
        '.##.#.#...##..#.....#..#...#...',
        '#.....#.#......#..........#.#..',
        '..###.##.#...................#.',
        '#.............#..#........#.##.',
        '#.#.#.#..#.....##..##.#....#...',
        '...#...#..#...#..##..##........',
        '...##...##..#...##...........#.',
        '.####..#.#.#.##.#.......#......',
        '...#....#.......#......#.......',
        '.....#.#...#...#..##..#..#.....',
        '......#.....###.#..#..#.#..###.',
        '.#....#....#..#..##.....##...#.',
        '.#.............##.###.#...#.#..',
        '#..#..#......#.###............#',
        '##.#..##....#..........#.#.#...',
        '......#........#...#.......##..',
        '....#.#..#..........#.....#.#..',
        '...#..#...#.#...#........#.....',
        '.....##...#....#.........##.##.',
        '....#...#...#.##.##...#....#...',
        '.#..#.....##......#..#.#..#....',
        '........##...##.##......#.#.#.#',
        '.................#..#.....##.#.',
        '...#.....#...#.........#..#.#.#',
        '....##.#.....#........#...#..#.',
        '#...............#..#.....#...#.',
        '.....#..#....#...#.####.#.#....',
        '####.#..#.##...#....#...##.....',
        '#...##..#...####..#....#.#...#.',
        '..#.......#.##..##...#.#.......',
        '...........##.......#....#..#..',
        '#.##....#...#.....#....##......',
        '....##.#.......#..#...##.......',
        '...#.........##.#..#......#.###',
        '.#..#..#....#.#.##....###..###.',
        '....#.#........##........##....',
        '....########....#.#.#.###.#...#',
        '...#.###.###.##......##.......#',
        '.#...#.###.......#..........#..',
        '..#..##.........#............#.',
        '.......##.#...#...##...#...#..#',
        '#.##....#.#...#.....#..#.#.....',
        '..#........#..#.#.#.#....#.##..',
        '...#...#.#.........#...#.#..##.',
        '#....#......#.#...........#..##',
        '...#.#.#..#...##...#...#...#...',
        '###..........#.#..........#....',
        '..#....#.#.#.#............#.#..',
        '....#...#..###...#.#....#......',
        '#...........####......##.#.....',
        '..#..##.#...#.....#..#.......##',
        '#.....#..###.....#...##..##....',
        '##..###..##...........#.#...#..',
        '.....#......#..............#...',
        '#..#.##.###.......#.......#...#',
        '#........#....##......#.#......',
        '.#.#.#...#.......#........#.##.',
        '#..#..##.....#...#.#.#.#..###..',
        '.#.#....#..#..#.#....##.#.#....',
        '..#.#.........####.#...#.#.###.',
        '....##........##....#........#.',
        '................#..........#...',
        '..#...................###.##..#',
        '.........#..#..#.#...#....#.#.#',
        '......#.....###.....#.#..#...#.',
        '.#.#.....#..##............##...',
        '...##......##.#....#...........',
        '...##..##..###.#...##..........',
        '....###...#..#.#......#......#.',
        '....##..............#..#..#.#..',
        '####.......#...##.##..#.#......',
        '.#......#.....#....###..#....#.',
        '.#.......#...##...#..##.#......',
        '#.......#.......#.#....#.#.#..#',
        '........#..#..#............##.#',
        '#.#...#.#..##..#.......##..#...',
        '...#....#...#..........##..#...',
        '#.#...#.##....###......##....#.',
        '#..#...###........#..#....#..#.',
        '#....#....###....#..#.......#..',
        '....#.#........#.............#.',
        '.#.##........##...#...#...#...#',
        '#.....##.....#.......#.#.#.....',
        '.#.##..........##..#....#......',
        '.#..##.##.#...##....#.#....##..',
        '........#.#.##.#....#.#..#....#',
        '..#...........................#',
        '.#...........#....#....#.#..#..',
        '........##...........#...#...#.',
        '..#.....#..#......#..##.......#',
        '..#....###..###...#.#.#..#....#',
        '#..#.#...#......##......#......',
        '...........#...##..##....##....',
        '#.#......###..#.....#.......#.#',
        '#.....#....#....#.#...#...#....',
        '....#...#.......#....##.#..#...',
        '.####..##......##.#........#..#',
        '..###..#.#.....#...........##..',
        '..##.#.#..#....#..#..#.........',
        '..........#.#.#####...#........',
        '.###......##.#....#........#...',
        '.....#..#..#.#..#.........#....',
        '..#....#...#...#...##..........',
        '....#..##.#.........##.#..##...',
        '##.####..#...#.#...#.....#..###',
        '..#..#...#...#.....##....#..#.#',
        '#..##..#.....#....#.#.....##..#',
        '...#...........##.....#......#.',
        '......#...#.....#.#..###.......',
        '.........#.....###.##..#...#...',
        '.#...#.##...#..........#.#..##.',
        '......#.......##.....#.....##..',
        '........###..........#...#.....',
        '##.......###..###...##...#.....',
        '#.#.............#..#..#.#......',
        '..##........#.###.....#....##..',
        '......#...#......#....##......#',
        '..#.....#...##...#.......#..#..',
        '..#.###..##.##...#....#...##.#.',
        '........##...#..#.#..##.....#.#',
        '.......................#......#',
        '..##.###......#.#.............#',
        '....#...........###............',
        '##...##.....#.......##.......#.',
        '...#..##..##..#.#.###..#......#',
        '........#........#.#..#..#.....',
        '.#......#....##..........#...#.',
        '.##...........##....#..........',
        '.#..#....###.......#....#..##..',
        '.....###..........#....#.#.#...',
        '...#....###.#.#......#......#..',
        '#.#.##.#.....#..#........#...#.',
        '...#.##.........#..#.....#.....',
        '.##...##......##...###...#.....',
        '...#.....#.##..#...#..#........',
        '........#............#.#.#..##.',
        '###...#.....#...#..#........##.',
        '##...#..#.....#.#....#.#.#.....',
        '#..##.......#...#.#...##..#....',
        '#...#.##.....#.#..#.##......#.#',
        '..#......#.#.#.##.##..........#',
        '..#.##......#.#.#..##..........',
        '....#..#....#..#..............#',
        '..........###.....##..#........',
        '...#.....##.....#..#.#..#...##.',
        '.#..##.#..#....#.#......#.##...',
        '...#.....#..#.#...#..#.....#.#.',
        '#...#.#......##...#..#...#....#',
        '..#.......##...#..#.......#...#',
        '#.....#...........##.#.........',
        '.#......##.....####...#.......#',
        '........#..#.....#.......#..#..',
        '....#.#...##..##...#..#....#...',
        '#.#......#...#.#.###.....#.....',
        '..##...#.#........#.##....#.#.#',
        '.#....#......#.#...###.#.......',
        '.......#.#...##....#.#....#....',
        '.....##..##...#..#.#.....##..#.',
        '.##..#.#.#....##.#...#.....#...',
        '.#..#..##....#.##.......#...#..',
        '....#.##...#..##......#.....#..',
        '.#..#....##....#...............',
        '..##...#.....###...............',
        '..............#.#.##........#.#',
        '.#.#....#....#...#.#........#..',
        '.##...#...#.#....#....#.#.....#',
        '#..............#......#.####.#.',
        '......#...........#..#.....##..',
        '#.#..##.##.....#......#..#.#..#',
        '##.##..#.##.#.............#...#',
        '...#..#......#....#............',
        '........###.#.#..#...#.....#.##',
        '..#.......#.##.........#..#....',
        '...##.#........##...#.#.##..#..',
        '...#..#......#...#....#........',
        '...........#..#..#...##...#....',
        '...#.....#....#..####..##.....#',
        '.......#..#..#......#.........#',
        '#......#........###.....##....#',
        '..#..#..#.#.#....##...##......#',
        '#.#..#..###.#..#.....####......',
        '.#................#####....#...',
        '.#.........#...#.......#......#',
        '..#.......#######........#.....',
        '..#........#.....#..#...#..#..#',
        '.#..#.#..#....#.#..##...#..#.#.',
        '..#...........#.#...#.#.##.....',
        '...#.#.#....##.###....#...####.',
        '.....#..#.....#..#.#.........#.',
        '......##...#...###............#',
        '..#.#......###..####..#......#.',
        '###.##.#..#......##.#..##.....#',
        '....###...##............#.#....',
        '..#.....##...#...##....#...#...',
        '#.....#.....#...#...#.#..#.....',
        '####..........##.#.#..#.....##.',
        '...#..........#...#...##..##.#.',
        '..........#.........#.#..#..#..',
        '#....###.....#.#...#.......##.#',
        '#..#.##.....#..........#...#...',
        '...#.#.###.......##..#.....#...',
        '#...#.#..#.............#..#.#..',
        '#........#.................#..#',
        '..#.#....#.#..##.#...#..#....#.',
        '#...#..........#...###....#...#',
        '......#.............#....#....#',
        '#.#.......##.......#.#....##..#',
        '##...#....#.............#..#...',
        '........#...###.##.#..###.#...#',
        '...##...#..#..#...##..##......#',
        '..#.......##....#.#.##....#....',
        '.....#....#..#.#...##.#.#.....#'
    ]


def get_test_input():
    return [
        '..##.......',
        '#...#...#..',
        '.#....#..#.',
        '..#.#...#.#',
        '.#...##..#.',
        '..#.##.....',
        '.#.#.#....#',
        '.#........#',
        '#.##...#...',
        '#...##....#',
        '.#..#...#.#'
    ]


def trunc_location(loc, input_len):
    if loc < input_len:
        return loc
    if loc >= input_len:
        return trunc_location(loc - input_len, input_len)


def is_tree(x, y, input_data):
    # print('At index [{},{}]'.format(x, y))
    local_x = trunc_location(x, len(input_data[0]))
    local_y = trunc_location(y, len(input_data))
    # print('Local index [{},{}]'.format(local_x, local_y))
    return input_data[local_y][local_x] == '#'


def next_location(x, y, add_x, add_y, input_data):
    if x is None and y is None:
        return 0, 0
    elif y == len(input_data) - 1:
        return None
    else:
        return x + add_x, y + add_y


def find_trees_in_route(input_data, add_x, add_y):
    location = next_location(None, None, add_x, add_y, input_data)
    trees = 0
    while location is not None:
        if is_tree(*location, input_data):
            # print('Tree at {}'.format(*location))
            trees += 1
        location = next_location(*location, add_x, add_y, input_data)
    return trees


def main(input_data):
    return functools.reduce(
        lambda a, b: a * b,
        [
            find_trees_in_route(input_data, 1, 1),
            find_trees_in_route(input_data, 3, 1),
            find_trees_in_route(input_data, 5, 1),
            find_trees_in_route(input_data, 7, 1),
            find_trees_in_route(input_data, 1, 2)
        ]
    )


if __name__ == '__main__':
    print(main(get_input()))
